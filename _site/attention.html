<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Score Prediction and Probability Calculator</title>
</head>
<body>
    <h2>Score Prediction</h2>

    <!-- Input fields for subject, attention, and solutions -->
    <label for="subjectInput">Subject (0: Science, 1: Math, 2: History, 3: English):</label>
    <input type="number" id="subjectInput" placeholder="Enter subject ID">

    <label for="attentionInput">Attention Type:</label>
    <input type="text" id="attentionInput" placeholder="Type 'focused' or 'divided'">

    <label for="solutionsInput">Number of Solutions (0-4):</label>
    <input type="number" id="solutionsInput" placeholder="Enter a number between 0 and 4">

    <!-- Button to trigger prediction -->
    <button onclick="predictScore()">Predict Score</button>

    <!-- Display area for predicted score -->
    <div id="predictedScore"></div>

    <!-- Button to calculate probability -->
    <h2>Probability Calculator</h2>

    <label for="subjectInputProb">Subject:</label>
    <input type="text" id="subjectInputProb" placeholder="Type here">

    <label for="attentionInputProb">Attention:</label>
    <input type="text" id="attentionInputProb" placeholder="Type here">

    <label for="solutionsInputProb">Solutions:</label>
    <input type="text" id="solutionsInputProb" placeholder="Type here">

    <div>
        <button onclick="calculateProbability()">Calculate Probability of score above 9.0/10.0</button>
    </div>

    <!-- JavaScript to handle prediction and probability calculation -->
    <script>
        // Function to predict score
        function predictScore() {
            // Retrieve user inputs
            var subject = parseInt(document.getElementById("subjectInput").value);
            var attention = document.getElementById("attentionInput").value;
            var solutions = parseInt(document.getElementById("solutionsInput").value);

            // Load attention.csv data
            var data = [];

            // Fetch the data from attention.csv file
            fetch('attention.csv')
                .then(response => response.text())
                .then(csvText => {
                    // Parse the CSV text
                    var rows = csvText.split('\n');
                    var headers = rows[0].split(',');
                    for (var i = 1; i < rows.length; i++) {
                        var values = rows[i].split(',');
                        var rowObject = {};
                        for (var j = 0; j < headers.length; j++) {
                            rowObject[headers[j].trim()] = values[j].trim();
                        }
                        data.push(rowObject);
                    }

                    // Filter data based on user inputs
                    var filteredData = data.filter(function(row) {
                        return parseInt(row.subject) === subject && row.attention === attention && parseInt(row.solutions) === solutions;
                    });

                    // Calculate average score
                    var totalScore = 0;
                    for (var i = 0; i < filteredData.length; i++) {
                        totalScore += parseFloat(filteredData[i].score);
                    }
                    var averageScore = filteredData.length > 0 ? totalScore / filteredData.length : 0;

                    // Display the predicted score
                    document.getElementById("predictedScore").innerText = "Predicted Score: " + averageScore.toFixed(2);
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }

        // Function to calculate probability
        function calculateProbability() {
            // Retrieve user inputs
            var subject = document.getElementById("subjectInputProb").value;
            var attention = document.getElementById("attentionInputProb").value;
            var solutions = document.getElementById("solutionsInputProb").value;

            // Perform some calculations to determine probability
            // For demonstration purposes, let's say probability is higher if subject is Math and attention is focused
            var probability = 0.5; // Default probability

            if (subject === "Math" && attention === "focused") {
                probability = 0.8; // Higher probability for Math and focused attention
            } else if (subject === "History" && attention === "divided" && parseInt(solutions) >= 2) {
                probability = 0.7; // Higher probability for History, divided attention, and multiple solutions
            }

            // Display the calculated probability
            alert("Probability of score above 9.0/10.0: " + (probability * 100).toFixed(2) + "%");
        }
    </script>
</body>
</html>
